var i, parent, value;var Announce = {    save: function ( td ) {        var input = $( td.parentNode ).find( 'input[type="text"]' );        if ( input.length == 0 ) {            input = '';        }        else {            input = input[ 0 ];        }        $.post( 'announce/update', {             announceid : td.parentNode.getElementsByTagName( 'td' )[ 0 ].id.split( '_' )[ 1 ],            text : input.value,            view : $( td.parentNode ).find( 'input[type="checkbox"]' )[ 0 ].checked        } );    },    showText: function () {        var td = this.parentNode;        var span = document.createElement( 'span' );        Announce.save( td );        span.onclick = Announce.editText;        span.innerHTML = this.value;        $( td ).empty();        td.appendChild( span );    },    editText: function( e ) {        var text = this.innerHTML;        var input = document.createElement( 'input' );        input.type = 'text';        input.className = 'announce_text';        input.value = text;        input.onblur = Announce.showText;        var td = this.parentNode;        $( td ).empty();        td.appendChild( input );        input.focus();        input.select();    },    add: function ( elem ) {        $.post( 'announce/create', {             text : elem,        } );    },    announce_delete: function ( id ) {        $.post( 'announce/delete', {             announceid : id,        } );    }};$( 'table.announce img.delete_announce' ).click( function () {    var announceid = this.id;    Announce.announce_delete( announceid );} );$( 'table.announce span' ).click( Announce.editText );$( 'table.announce input[type="checkbox"]' ).click( function () {    Announce.save( this.parentNode );} );$( 'form' ).submit( function () {        var subm_text = document.getElementById( 'subm_text' );        Announce.add( subm_text );} );